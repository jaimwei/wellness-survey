<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Santa Monica Proper - Wellness Experience Survey</title>
    
    <!-- Import fonts first -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Crimson+Text:wght@400;600&family=Work+Sans:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Santa Monica Proper Hotel Brand Colors and Fonts */
        
        /* Brand Colors */
        :root {
            --smp-cream: #f4f2f0;
            --smp-black: #000000;
        }
        
        .smp-header {
            font-family: 'Crimson Text', Georgia, serif;
            font-weight: 400;
            letter-spacing: 0.08em;
        }
        
        .smp-body {
            font-family: 'Crimson Text', Georgia, serif;
            font-weight: 300;
        }
        
        .survey-title {
            font-family: 'Work Sans', sans-serif;
            font-weight: 600;
            letter-spacing: 0.2em;
            font-size: 18px;
            line-height: 1.2;
        }
        
        /* Custom styling */
        body {
            background-color: #f4f2f0;
            color: #000000;
        }
        
        .step-content {
            display: none;
        }
        
        .step-content.active {
            display: block;
        }
        
        .option-card {
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid rgba(0, 0, 0, 0.1);
            background-color: rgba(255, 255, 255, 0.5);
        }
        
        .option-card:hover {
            background-color: rgba(243, 244, 246, 0.5);
        }
        
        .option-card.selected {
            border: 2px solid #000000;
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .btn-primary {
            background-color: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #000000;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .btn-primary:hover:not(:disabled) {
            background-color: #000000;
            color: #f4f2f0;
        }
        
        .btn-primary:disabled {
            background-color: rgba(255, 255, 255, 0.3);
            color: #999999;
            cursor: not-allowed;
        }
        
        input, select, textarea {
            border: 1px solid rgba(0, 0, 0, 0.1);
            background-color: rgba(255, 255, 255, 0.8);
            color: #000000;
            height: auto;
            min-height: 44px;
        }
        
        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }
        
        .survey-container {
            background-color: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .profile-summary {
            background-color: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .day-header {
            background-color: #000000;
            color: #ffffff;
        }
        
        .contact-section {
            background-color: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .day-container {
            margin-bottom: 30px;
            background-color: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding-bottom: 15px;
            margin-bottom: 15px;
            position: relative;
        }
        
        .activity-item:not(:last-child) {
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        }
        
        .swap-btn {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: #000;
            font-size: 10px;
            padding: 4px 8px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.2s ease;
        }
        
        .swap-btn:hover {
            background: #000;
            color: #f4f2f0;
        }
        
        .activity-item.swappable {
            border: 1px dashed rgba(0, 0, 0, 0.2);
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .swap-options {
            display: none;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(0, 0, 0, 0.1);
            padding: 15px;
            margin-top: 10px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .swap-options.active {
            display: block;
        }
        
        .swap-option {
            padding: 8px;
            cursor: pointer;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            font-size: 11px;
        }
        
        .swap-option:hover {
            background: rgba(0, 0, 0, 0.05);
        }
        
        .swap-option:last-child {
            border-bottom: none;
        }
        
        .activity-time {
            font-size: 10px;
            color: #000000;
            font-weight: 400;
            width: 80px;
            flex-shrink: 0;
            padding-top: 2px;
        }
        
        .activity-content {
            flex: 1;
        }
        
        .activity-title {
            font-size: 11px;
            color: #000000;
            font-weight: 700;
            letter-spacing: 0.8px;
            text-transform: uppercase;
            margin-bottom: 4px;
        }
        
        .activity-location {
            font-size: 10px;
            color: #777777;
            font-weight: 400;
            margin-bottom: 6px;
        }
        
        .activity-description {
            font-size: 11px;
            color: #666666;
            line-height: 1.4;
        }
    </style>
</head>
<body class="min-h-screen smp-body">
    <div class="max-w-xl mx-auto min-h-screen">
        <!-- Header -->
        <div class="px-6 pt-9 pb-5 text-center">
            <div class="text-center mb-5">
                <!-- Santa Monica Proper Logo -->
                <div class="flex justify-center mb-5">
                    <img 
                        src="santa_monica_proper_logo.png" 
                        alt="Santa Monica Proper Hotel"
                        class="h-16 w-auto"
                        style="max-height: 4rem;"
                    />
                </div>
                
                <h1 class="survey-title tracking-widest uppercase mb-4" style="font-weight: 600; color: #000000;">
                    WELLNESS EXPERIENCE SURVEY
                </h1>

                <!-- Survey Purpose -->
                <div class="smp-body text-sm leading-relaxed max-w-sm mx-auto p-4 border" 
                     style="background-color: rgba(255, 255, 255, 0.3); border-color: rgba(0, 0, 0, 0.1); color: #000000;">
                    Help us create your personalized wellness itinerary. This brief survey will generate a detailed day-by-day schedule of activities, treatments, and dining experiences tailored to your preferences and your stay.
                </div>
            </div>
            
            <p class="smp-body text-xs uppercase tracking-wide text-center" style="color: #777777;">
                Step <span id="current-step">1</span> of <span id="total-steps">6</span>
            </p>
        </div>

        <!-- Survey Content -->
        <div class="survey-container mx-6 mb-6 p-6">
            <h2 class="smp-header text-xs tracking-wide uppercase mb-5" id="step-title">
                Guest Information
            </h2>
            
            <!-- Step 1: Guest Information -->
            <div class="step-content active" id="step-1">
                <div class="grid grid-cols-1 gap-5">
                    <div>
                        <label class="smp-header block text-sm tracking-wide uppercase mb-2" style="font-weight: 400; color: #000000;">
                            Guest Name(s) *
                        </label>
                        <input
                            type="text"
                            id="guest-names"
                            placeholder="John & Jane Smith"
                            class="smp-body w-full p-3 text-sm"
                            onchange="checkStep1()"
                            oninput="checkStep1()"
                        />
                    </div>

                    <div>
                        <label class="smp-header block text-sm tracking-wide uppercase mb-2">
                            Who are you traveling with? *
                        </label>
                        <select id="party-type" class="smp-body w-full p-3 text-sm" onchange="checkStep1()">
                            <option value="">Select...</option>
                            <option value="solo">Just me</option>
                            <option value="couple">My partner and I</option>
                            <option value="family">My family (with kids)</option>
                            <option value="friends">A group of friends</option>
                            <option value="business">Business colleagues</option>
                        </select>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="smp-header block text-sm tracking-wide uppercase mb-2">
                                Arrival Date *
                            </label>
                            <input
                                type="date"
                                id="arrival-date"
                                class="smp-body w-full p-3 text-sm"
                                onchange="checkStep1()"
                            />
                        </div>

                        <div>
                            <label class="smp-header block text-sm tracking-wide uppercase mb-2">
                                Estimated Arrival Time
                            </label>
                            <select id="arrival-time" class="smp-body w-full p-3 text-sm">
                                <option value="">Select...</option>
                                <option value="early-morning">Early Morning (6-9 AM)</option>
                                <option value="morning">Morning (9 AM-12 PM)</option>
                                <option value="afternoon">Afternoon (12-4 PM)</option>
                                <option value="evening">Evening (4-8 PM)</option>
                                <option value="late-evening">Late Evening (8 PM+)</option>
                            </select>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="smp-header block text-sm tracking-wide uppercase mb-2">
                                Length of Stay *
                            </label>
                            <select id="length-of-stay" class="smp-body w-full p-3 text-sm" onchange="checkStep1()">
                                <option value="">Select...</option>
                                <option value="1">1 night</option>
                                <option value="2">2 nights</option>
                                <option value="3">3 nights</option>
                                <option value="4">4 nights</option>
                                <option value="5">5 nights</option>
                                <option value="6-7">6-7 nights</option>
                                <option value="week+">1 week or more</option>
                            </select>
                        </div>

                        <div>
                            <label class="smp-header block text-sm tracking-wide uppercase mb-2">
                                Estimated Departure Time
                            </label>
                            <select id="departure-time" class="smp-body w-full p-3 text-sm">
                                <option value="">Select...</option>
                                <option value="early-morning">Early Morning (6-9 AM)</option>
                                <option value="morning">Morning (9 AM-12 PM)</option>
                                <option value="afternoon">Afternoon (12-4 PM)</option>
                                <option value="evening">Evening (4-8 PM)</option>
                                <option value="flexible">Flexible/Late Checkout</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label class="smp-header block text-sm tracking-wide uppercase mb-2">
                            Occasion (Optional)
                        </label>
                        <select id="travel-purpose" class="smp-body w-full p-3 text-sm">
                            <option value="">Select...</option>
                            <option value="leisure">Leisure/Vacation</option>
                            <option value="business">Business Travel</option>
                            <option value="anniversary">Anniversary/Romance</option>
                            <option value="birthday">Birthday Celebration</option>
                            <option value="wellness-retreat">Dedicated Wellness Retreat</option>
                            <option value="other">Other Special Occasion</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Step 2: Energy Level -->
            <div class="step-content" id="step-2">
                <p class="smp-body text-xs leading-relaxed mb-5" style="color: #666666;">
                    This helps us match the right intensity level for your wellness experience:
                </p>
                <div class="grid gap-4">
                    <div class="option-card p-5" onclick="selectEnergy('high-activity')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-2">
                            High Activity
                        </h3>
                        <p class="smp-body text-xs leading-relaxed mb-2" style="color: #666666;">
                            I want challenging workouts, intense experiences, and active adventures
                        </p>
                        <p class="smp-body text-xs italic leading-tight" style="color: #999999;">
                            HIIT, boot camp, VO2 max testing, personal training, beach sports
                        </p>
                    </div>
                    <div class="option-card p-5" onclick="selectEnergy('balanced')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-2">
                            Balanced Mix
                        </h3>
                        <p class="smp-body text-xs leading-relaxed mb-2" style="color: #666666;">
                            I want some active moments balanced with relaxing experiences
                        </p>
                        <p class="smp-body text-xs italic leading-tight" style="color: #999999;">
                            Yoga classes, moderate spa treatments, pool time with light activities
                        </p>
                    </div>
                    <div class="option-card p-5" onclick="selectEnergy('restorative')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-2">
                            Restorative Focus
                        </h3>
                        <p class="smp-body text-xs leading-relaxed mb-2" style="color: #666666;">
                            I prefer gentle, calming, and deeply relaxing experiences
                        </p>
                        <p class="smp-body text-xs italic leading-tight" style="color: #999999;">
                            Gentle yoga, spa treatments, meditation, peaceful recovery sessions
                        </p>
                    </div>
                </div>
            </div>

            <!-- Step 3: Wellness Interests -->
            <div class="step-content" id="step-3">
                <p class="smp-body text-xs leading-relaxed mb-5" style="color: #666666;">
                    Select all wellness areas that interest you during your stay (choose multiple):
                </p>
                <div class="grid gap-4">
                    <div class="option-card p-5" onclick="toggleInterest('movement')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-2">
                            Movement & Fitness
                        </h3>
                        <p class="smp-body text-xs leading-relaxed mb-2" style="color: #666666;">
                            Physical activity, exercise, and fitness training
                        </p>
                        <p class="smp-body text-xs italic leading-tight" style="color: #999999;">
                            Personal training, yoga classes, HIIT, Pilates, VO2 Max testing ($150), 24/7 gym access
                        </p>
                    </div>
                    <div class="option-card p-5" onclick="toggleInterest('spa')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-2">
                            Spa & Ayurvedic Treatments
                        </h3>
                        <p class="smp-body text-xs leading-relaxed mb-2" style="color: #666666;">
                            Spa treatments and Ayurvedic wellness experiences
                        </p>
                        <p class="smp-body text-xs italic leading-tight" style="color: #999999;">
                            Surya Spa treatments (15% off for guests), Panchakarma, massage, meditation, sound baths
                        </p>
                    </div>
                    <div class="option-card p-5" onclick="toggleInterest('recovery')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-2">
                            Recovery & Technology
                        </h3>
                        <p class="smp-body text-xs leading-relaxed mb-2" style="color: #666666;">
                            Recovery, restoration, and wellness technology
                        </p>
                        <p class="smp-body text-xs italic leading-tight" style="color: #999999;">
                            Recovery Suite ($145-$345) with Ammortal Chamber, cold plunge, sauna, red light, compression therapy
                        </p>
                    </div>
                    <div class="option-card p-5" onclick="toggleInterest('outdoor')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-2">
                            Outdoor & Beach Activities
                        </h3>
                        <p class="smp-body text-xs leading-relaxed mb-2" style="color: #666666;">
                            Outdoor experiences and Santa Monica natural setting
                        </p>
                        <p class="smp-body text-xs italic leading-tight" style="color: #999999;">
                            Rooftop pool (only one on Westside), beach activities, bike rentals, outdoor yoga, sunset experiences
                        </p>
                    </div>
                    <div class="option-card p-5" onclick="toggleInterest('dining')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-2">
                            Wellness Dining & Lifestyle
                        </h3>
                        <p class="smp-body text-xs leading-relaxed mb-2" style="color: #666666;">
                            Healthy eating, Ayurvedic nutrition, and lifestyle
                        </p>
                        <p class="smp-body text-xs italic leading-tight" style="color: #999999;">
                            Proper Club Lounge ($195/day), Surya Ayurvedic lattes, wellness bowls, smoothies, seed oil-free dining at Palma & Calabra
                        </p>
                    </div>
                </div>
            </div>

            <!-- Step 4: Timing Preference -->
            <div class="step-content" id="step-4">
                <p class="smp-body text-xs leading-relaxed mb-5" style="color: #666666;">
                    When do you prefer your wellness activities?
                </p>
                <div class="grid gap-3">
                    <div class="option-card p-4" onclick="selectTiming('early-bird')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-1">
                            Early Bird (6-10 AM)
                        </h3>
                        <p class="smp-body text-xs leading-relaxed" style="color: #666666;">
                            I love starting my day with wellness activities
                        </p>
                    </div>
                    <div class="option-card p-4" onclick="selectTiming('mid-day')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-1">
                            Mid-Day (10 AM - 4 PM)
                        </h3>
                        <p class="smp-body text-xs leading-relaxed" style="color: #666666;">
                            I prefer wellness activities during the day
                        </p>
                    </div>
                    <div class="option-card p-4" onclick="selectTiming('evening')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-1">
                            Evening (4-8 PM)
                        </h3>
                        <p class="smp-body text-xs leading-relaxed" style="color: #666666;">
                            I like to wind down with wellness in the evening
                        </p>
                    </div>
                    <div class="option-card p-4" onclick="selectTiming('flexible')">
                        <h3 class="smp-header text-xs tracking-wide uppercase mb-1">
                            Flexible Scheduling
                        </h3>
                        <p class="smp-body text-xs leading-relaxed" style="color: #666666;">
                            I am open to activities at various times
                        </p>
                    </div>
                </div>
            </div>

            <!-- Step 5: Special Notes -->
            <div class="step-content" id="step-5">
                <p class="smp-body text-xs leading-relaxed mb-4" style="color: #666666;">
                    Any special considerations or goals for your wellness experience?
                </p>
                <textarea
                    id="special-notes"
                    placeholder="Optional - Examples:
• Dietary restrictions or preferences
• Physical limitations or injuries to consider
• Specific wellness goals
• Celebrating a special occasion
• Previous experience with Ayurveda or specific treatments
• Booking preferences (advance vs. spontaneous)"
                    rows="8"
                    class="smp-body w-full p-4 text-sm resize-none leading-relaxed"
                ></textarea>
            </div>

            <!-- Step 6: Results -->
            <div class="step-content" id="step-6">
                <!-- Results will be populated by JavaScript -->
            </div>
        </div>

        <!-- Navigation -->
        <div class="flex justify-between px-6 pb-10">
            <button
                id="prev-btn"
                class="btn-primary smp-body px-4 py-2 text-xs tracking-wide uppercase"
                disabled
                onclick="goBack()"
            >
                Previous
            </button>

            <button
                id="next-btn"
                class="btn-primary smp-body px-4 py-2 text-xs tracking-wide uppercase"
                disabled
                onclick="goNext()"
            >
                Next
            </button>

            <button
                id="complete-btn"
                class="btn-primary smp-body px-4 py-2 text-xs tracking-wide uppercase"
                style="display: none;"
                onclick="completeForm()"
            >
                Complete Survey
            </button>
        </div>
    </div>

    <script>
        // Simple global variables
        var currentStep = 1;
        var surveyData = {
            names: '',
            partyType: '',
            arrivalDate: '',
            arrivalTime: '',
            lengthOfStay: '',
            departureTime: '',
            travelPurpose: '',
            energyLevel: '',
            interests: [],
            timing: '',
            notes: ''
        };

        console.log('Survey script loaded!');

        // Step 1 validation
        function checkStep1() {
            console.log('Checking step 1...');
            var name = document.getElementById('guest-names').value.trim();
            var party = document.getElementById('party-type').value;
            var arrival = document.getElementById('arrival-date').value;
            var length = document.getElementById('length-of-stay').value;
            
            console.log('Values:', name, party, arrival, length);
            
            var valid = name && party && arrival && length;
            console.log('Step 1 valid:', valid);
            
            var nextBtn = document.getElementById('next-btn');
            nextBtn.disabled = !valid;
            nextBtn.style.opacity = valid ? '1' : '0.5';
        }

        // Energy selection
        function selectEnergy(energy) {
            console.log('Energy selected:', energy);
            surveyData.energyLevel = energy;
            
            // Update UI
            var cards = document.querySelectorAll('#step-2 .option-card');
            cards.forEach(function(card) {
                card.classList.remove('selected');
            });
            event.target.closest('.option-card').classList.add('selected');
            
            // Enable next button
            var nextBtn = document.getElementById('next-btn');
            nextBtn.disabled = false;
            nextBtn.style.opacity = '1';
        }

        // Interest selection
        function toggleInterest(interest) {
            console.log('Interest toggled:', interest);
            var index = surveyData.interests.indexOf(interest);
            if (index > -1) {
                surveyData.interests.splice(index, 1);
            } else {
                surveyData.interests.push(interest);
            }
            
            // Update UI
            event.target.closest('.option-card').classList.toggle('selected');
            
            // Enable next button if at least one selected
            var nextBtn = document.getElementById('next-btn');
            var valid = surveyData.interests.length > 0;
            nextBtn.disabled = !valid;
            nextBtn.style.opacity = valid ? '1' : '0.5';
        }

        // Timing selection
        function selectTiming(timing) {
            console.log('Timing selected:', timing);
            surveyData.timing = timing;
            
            // Update UI
            var cards = document.querySelectorAll('#step-4 .option-card');
            cards.forEach(function(card) {
                card.classList.remove('selected');
            });
            event.target.closest('.option-card').classList.add('selected');
            
            // Enable next button
            var nextBtn = document.getElementById('next-btn');
            nextBtn.disabled = false;
            nextBtn.style.opacity = '1';
        }

        // Navigation
        function goNext() {
            console.log('Going to next step from:', currentStep);
            
            if (currentStep === 1) {
                surveyData.names = document.getElementById('guest-names').value;
                surveyData.partyType = document.getElementById('party-type').value;
                surveyData.arrivalDate = document.getElementById('arrival-date').value;
                surveyData.arrivalTime = document.getElementById('arrival-time').value;
                surveyData.lengthOfStay = document.getElementById('length-of-stay').value;
                surveyData.departureTime = document.getElementById('departure-time').value;
                surveyData.travelPurpose = document.getElementById('travel-purpose').value;
            } else if (currentStep === 5) {
                surveyData.notes = document.getElementById('special-notes').value;
            }
            
            currentStep++;
            updateDisplay();
            
            if (currentStep === 6) {
                showResults();
            }
        }

        function goBack() {
            console.log('Going back from step:', currentStep);
            currentStep--;
            updateDisplay();
            
            // Re-enable next button based on current step validation
            var nextBtn = document.getElementById('next-btn');
            var valid = false;
            
            if (currentStep === 1) {
                checkStep1();
                return; // checkStep1 handles button state
            } else if (currentStep === 2) {
                valid = surveyData.energyLevel !== '';
            } else if (currentStep === 3) {
                valid = surveyData.interests.length > 0;
            } else if (currentStep === 4) {
                valid = surveyData.timing !== '';
            } else if (currentStep === 5) {
                valid = true;
            }
            
            nextBtn.disabled = !valid;
            nextBtn.style.opacity = valid ? '1' : '0.5';
        }

        function updateDisplay() {
            console.log('Updating display for step:', currentStep);
            
            // Update step counter
            document.getElementById('current-step').textContent = currentStep;
            
            // Update title
            var titles = ['Guest Information', 'Energy Level', 'Wellness Interests', 'Timing Preference', 'Special Notes', 'Your Personalized Itinerary'];
            document.getElementById('step-title').textContent = titles[currentStep - 1];
            
            // Show/hide steps
            for (var i = 1; i <= 6; i++) {
                var step = document.getElementById('step-' + i);
                if (step) {
                    step.classList.toggle('active', i === currentStep);
                }
            }
            
            // Update buttons
            var prevBtn = document.getElementById('prev-btn');
            var nextBtn = document.getElementById('next-btn');
            var completeBtn = document.getElementById('complete-btn');
            
            prevBtn.disabled = currentStep === 1;
            prevBtn.style.opacity = currentStep === 1 ? '0.5' : '1';
            
            if (currentStep === 6) {
                nextBtn.style.display = 'none';
                completeBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                completeBtn.style.display = 'none';
                
                // Check if current step is valid
                var valid = false;
                if (currentStep === 2) {
                    valid = surveyData.energyLevel !== '';
                } else if (currentStep === 3) {
                    valid = surveyData.interests.length > 0;
                } else if (currentStep === 4) {
                    valid = surveyData.timing !== '';
                } else if (currentStep === 5) {
                    valid = true; // Notes are optional
                }
                
                nextBtn.disabled = !valid;
                nextBtn.style.opacity = valid ? '1' : '0.5';
            }
        }

        function showResults() {
            var lengthOfStay = parseInt(surveyData.lengthOfStay) || 1;
            var interests = surveyData.interests;
            var energyLevel = surveyData.energyLevel;
            var timing = surveyData.timing;
            
            var html = `
                <div class="profile-summary p-5 mb-6">
                    <h3 class="smp-header text-xs tracking-wide uppercase mb-4">
                        Your Wellness Profile
                    </h3>
                    <div class="grid grid-cols-2 gap-4 text-xs">
                        <div>
                            <span class="smp-header uppercase tracking-wide" style="color: #666666;">Energy Level:</span>
                            <p class="smp-body mt-1 capitalize">
                                ${surveyData.energyLevel.replace('-', ' ')}
                            </p>
                        </div>
                        <div>
                            <span class="smp-header uppercase tracking-wide" style="color: #666666;">Interests:</span>
                            <p class="smp-body mt-1">
                                ${surveyData.interests.join(', ')}
                            </p>
                        </div>
                        <div>
                            <span class="smp-header uppercase tracking-wide" style="color: #666666;">Group:</span>
                            <p class="smp-body mt-1 capitalize">
                                ${surveyData.partyType}
                            </p>
                        </div>
                        <div>
                            <span class="smp-header uppercase tracking-wide" style="color: #666666;">Timing:</span>
                            <p class="smp-body mt-1 capitalize">
                                ${surveyData.timing.replace('-', ' ')}
                            </p>
                        </div>
                    </div>
                </div>`;

            // Generate activities for each day
            for (var day = 1; day <= lengthOfStay; day++) {
                html += generateDayItinerary(day, interests, energyLevel, timing, lengthOfStay);
            }

            html += `
                <div class="contact-section p-5 mt-6">
                    <h3 class="smp-header text-xs tracking-wide uppercase mb-3">
                        Save Your Itinerary
                    </h3>
                    <p class="smp-body text-xs leading-relaxed mb-4" style="color: #666666;">
                        Keep a copy of your personalized wellness itinerary:
                    </p>
                    
                    <div class="grid grid-cols-1 gap-3 mb-4">
                        <div class="flex items-center gap-3">
                            <input 
                                type="email" 
                                id="guest-email" 
                                placeholder="Enter your email address"
                                class="smp-body flex-1 p-2 text-xs"
                            />
                            <button 
                                onclick="emailItinerary()"
                                class="btn-primary smp-body px-3 py-2 text-xs tracking-wide uppercase whitespace-nowrap"
                            >
                                Email to Me
                            </button>
                        </div>
                        
                        <button 
                            onclick="downloadPDF()"
                            class="btn-primary smp-body px-3 py-2 text-xs tracking-wide uppercase w-full"
                        >
                            Download as PDF
                        </button>
                    </div>
                    
                    <div class="border-t pt-4 mt-4" style="border-color: rgba(0, 0, 0, 0.1);">
                        <h4 class="smp-header text-xs tracking-wide uppercase mb-2">
                            Customize Your Experience
                        </h4>
                        <p class="smp-body text-xs leading-relaxed mb-3" style="color: #666666;">
                            Click "Swap" next to any activity to see alternative options. Your preferences will be saved automatically.
                        </p>
                        
                        <h4 class="smp-header text-xs tracking-wide uppercase mb-2 mt-4">
                            Ready to Book Your Experience?
                        </h4>
                        <p class="smp-body text-xs leading-relaxed mb-3" style="color: #666666;">
                            Contact our wellness concierge to book your personalized experience.
                        </p>
                        <div class="flex flex-col gap-2">
                            <div>
                                <span class="smp-header text-xs uppercase tracking-wide" style="color: #000000;">Phone:</span>
                                <span class="smp-body text-xs ml-2">(310) 620-9990</span>
                            </div>
                            <div>
                                <span class="smp-header text-xs uppercase tracking-wide" style="color: #000000;">Email:</span>
                                <span class="smp-body text-xs ml-2">wellness@properhotel.com</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('step-6').innerHTML = html;
        }

        function generateDayItinerary(day, interests, energyLevel, timing, totalDays) {
            var dayTitle = day === 1 ? 'Day 1 - Arrival & Welcome' : 
                          day === totalDays ? `Day ${day} - Departure & Wellness` : 
                          `Day ${day} - Full Wellness Experience`;

            var activities = getDayActivities(day, interests, energyLevel, timing, totalDays);
            
            var html = `
                <div class="day-container">
                    <div class="day-header p-3">
                        <h3 class="smp-header text-xs tracking-wide uppercase">
                            ${dayTitle}
                        </h3>
                    </div>
                    <div class="p-4">`;

            activities.forEach(function(activity) {
                html += `
                    <div class="activity-item swappable" data-day="${day}" data-time="${activity.time}">
                        <div class="activity-time">${activity.time}</div>
                        <div class="activity-content">
                            <div class="activity-title">${activity.title}</div>
                            <div class="activity-location">${activity.location}</div>
                            <div class="activity-description">
                                ${activity.description}
                                ${activity.bookingLink ? `<br><a href="${activity.bookingLink}" target="_blank" class="text-blue-600 underline text-xs mt-1 inline-block">Book Now</a>` : ''}
                            </div>
                        </div>
                        <button class="swap-btn" onclick="showSwapOptions(this, ${day}, '${activity.time}')">Swap</button>
                        <div class="swap-options" id="swap-${day}-${activity.time.replace(/[^a-zA-Z0-9]/g, '')}">
                            <!-- Swap options will be populated here -->
                        </div>
                    </div>`;
            });

            html += `</div></div>`;
            return html;
        }

        function getDayActivities(day, interests, energyLevel, timing, totalDays) {
            var activities = [];
            
            if (day === 1) {
                // Arrival Day
                activities.push({
                    time: '2:00 PM',
                    title: 'Check-in & Wellness Welcome Package',
                    location: 'Front Desk',
                    description: 'Arrive and check into your room. Receive your personalized wellness welcome package with 15% Surya Spa discount card, mini-bar refresh (snacks & non-alcoholic beverages), and guaranteed 2PM late checkout.'
                });
                
                activities.push({
                    time: '3:30 PM',
                    title: 'Ayurvedic Wellness Consultation',
                    location: 'Surya Spa (3,000 sq ft collaboration with Martha Soffer)',
                    description: 'Meet with internationally acclaimed Ayurvedic practitioners for personalized Dosha consultation, customized treatment plan, and access to cooking & meditation classes.',
                    bookingLink: 'https://dashboard.boulevard.io/booking/businesses/aac8e693-831d-4030-b8f8-eb9238e089bc/widget#/cart/menu/Session%20Time'
                });
                
                if (interests.includes('outdoor')) {
                    activities.push({
                        time: '5:00 PM',
                        title: 'Rooftop Pool & Coastal Views',
                        location: '7th Floor Rooftop Pool (Only one on Westside)',
                        description: 'Relax at the only rooftop pool on the Westside with panoramic Pacific views, poolside cabanas, circular bar with fireplace, and access to outdoor yoga classes.'
                    });
                }
                
                if (interests.includes('dining')) {
                    activities.push({
                        time: '7:00 PM',
                        title: 'Welcome Dinner at Calabra',
                        location: 'Calabra Rooftop Restaurant',
                        description: 'Mediterranean-inspired cuisine with coastal influences. Try the Falafel Bowl with green tahini, Pan Seared Salmon with vadouvan corn cream, or Calabra Burger. Entirely seed oil-free with biodynamic wines.',
                        bookingLink: 'https://www.opentable.com/r/calabra-santa-monica'
                    });
                }
            } else if (day === totalDays && totalDays > 1) {
                // Departure Day
                if (timing === 'early-bird') {
                    activities.push({
                        time: '7:00 AM',
                        title: 'Sunrise Yoga in Helios Studio',
                        location: 'Helios Wellness Studio (naturally lit with floor-to-ceiling windows)',
                        description: 'Complimentary group yoga class with resident instructors. Mats provided. Private sessions available for yoga, meditation, or dance classes.',
                        bookingLink: 'https://santa-monica-fitness.properhotel.com/'
                    });
                }
                
                activities.push({
                    time: '9:00 AM',
                    title: 'Wellness Breakfast at Palma',
                    location: 'Palma Art-Filled Lobby Lounge',
                    description: 'Try Greek Yogurt Parfait with Straus Farms yogurt & hemp seed granola, Overnight Oats with flax seeds & goji berries, or Whole Grain Pancakes with almond butter. Plus Surya Ayurvedic Lattes. (7am-11:30am)',
                    bookingLink: 'https://www.opentable.com/r/palma-santa-monica'
                });
                
                if (interests.includes('recovery')) {
                    activities.push({
                        time: '10:30 AM',
                        title: 'Final Ammortal Chamber Experience',
                        location: 'Recovery Suite (Available 7am-8pm)',
                        description: 'Last session in the Ammortal Chamber featuring Multi-Wave PEMF, Vibroacoustic Sound Therapy, Multi-Wavelength Light Therapy, and Molecular Hydrogen Therapy. 60-min: $245, 90-min: $345',
                        bookingLink: 'https://dashboard.boulevard.io/booking/businesses/aac8e693-831d-4030-b8f8-eb9238e089bc/widget#/cart/menu/Session%20Time'
                    });
                }
                
                activities.push({
                    time: '12:00 PM',
                    title: 'Check-out & Surya Wellness Kit',
                    location: 'Front Desk',
                    description: 'Receive your personalized wellness plan, Surya hand-made Ayurvedic skin care products (Face Oil, Collagen Cream), and continuing wellness rituals for home.'
                });
            } else {
                // Full Days
                if (timing === 'early-bird' || timing === 'flexible') {
                    if (interests.includes('movement')) {
                        if (energyLevel === 'high-activity') {
                            activities.push({
                                time: '7:00 AM',
                                title: 'HIIT Boot Camp Class',
                                location: '2,500 sq ft Fitness Center (24/7 access)',
                                description: 'Complimentary high-intensity boot camp with state-of-the-art Technogym, Peloton, Tonal, and reformers. Three expansive spaces with floor-to-ceiling windows.',
                                bookingLink: 'https://santa-monica-fitness.properhotel.com/'
                            });
                        } else if (energyLevel === 'balanced') {
                            activities.push({
                                time: '8:00 AM',
                                title: 'Mat Pilates with Teo',
                                location: 'Helios Studio',
                                description: 'Signature group fitness class from our favorite local pros. Complimentary for hotel guests with mats provided. First-come, first-served.',
                                bookingLink: 'https://santa-monica-fitness.properhotel.com/'
                            });
                        } else {
                            activities.push({
                                time: '8:30 AM',
                                title: 'Restorative Yoga & Meditation',
                                location: 'Helios Studio or Outdoor Yoga Terrace',
                                description: 'Gentle yoga with fresh ocean breezes and coastal views. Access to daily complimentary classes including sound baths. Resident instructors available for private sessions.',
                                bookingLink: 'https://santa-monica-fitness.properhotel.com/'
                            });
                        }
                    }
                }
                
                if (interests.includes('dining')) {
                    activities.push({
                        time: '9:30 AM',
                        title: 'Ayurvedic Breakfast & Surya Lattes',
                        location: 'Palma Art-Filled Lobby Lounge',
                        description: 'Try BRAINPOWER LATTE (Brahmi, Dandy Blend) for productivity or ENERGY LATTE (Cordyceps, Ashwagandha) caffeine-free. Plus Greek yogurt parfait with Flamingo Estate honey. Seed oil-free preparations. (7am-11:30am)',
                        bookingLink: 'https://www.opentable.com/r/palma-santa-monica'
                    });
                }
                
                if (interests.includes('movement') && energyLevel === 'high-activity') {
                    activities.push({
                        time: '11:00 AM',
                        title: 'VO2 Max Performance Testing',
                        location: 'Fitness Center',
                        description: 'Clinical-grade cardiovascular assessment once reserved for elite athletes. Guided by wellness experts using clinical technology to help you train smarter and live well. $150',
                        bookingLink: 'https://santa-monica-fitness.properhotel.com/'
                    });
                } else if (interests.includes('movement')) {
                    activities.push({
                        time: '11:00 AM',
                        title: 'TruBe Personal Training',
                        location: '2,500 sq ft Fitness Center',
                        description: 'Premium 1-on-1 training through TruBe app with top-rated professionals. Choose from Pilates, dance-inspired workouts, nutrition coaching, and dynamic fitness techniques.',
                        bookingLink: 'https://santa-monica-fitness.properhotel.com/'
                    });
                }
                
                if (day <= 3 && interests.includes('dining')) { // Loreto Thu-Sun through Sept 1
                    activities.push({
                        time: '12:30 PM',
                        title: 'Lunch at Proper x Loreto Pop Up',
                        location: 'Loreto Pop Up (Pool Level) - Limited Time',
                        description: 'East side\'s beloved Loreto brings Baja-inspired crudos, bright aguachiles, and flame-kissed tostadas with ocean backdrop. Thu-Sun 12-8pm through September 1st.',
                        bookingLink: 'https://www.properhotel.com/santa-monica/restaurants-bars/loreto/'
                    });
                } else if (interests.includes('dining')) {
                    activities.push({
                        time: '12:30 PM',
                        title: 'Wellness Lunch & Cold-Pressed Juices',
                        location: 'Calabra Rooftop Restaurant',
                        description: 'Try SUNSHINE juice (orange, aloe vera, turmeric) for immune support, MORNING GREENS (cucumber, kale, parsley) for energy boost, or smoothies like PACIFIC BLUE (spirulina, coconut, pineapple) and MUSCLE BEACH (vegan protein, maca, cacao).',
                        bookingLink: 'https://www.opentable.com/r/calabra-santa-monica'
                    });
                }
                
                if (timing === 'mid-day' || timing === 'flexible') {
                    if (interests.includes('spa')) {
                        var spaTime = day <= 3 ? '2:00 PM' : '1:00 PM';
                        var treatments = [
                            'Panchakarma Detox Program with herbalized oils cooked nightly for each guest. Up to 4 hours of deeply restorative treatments with two therapists.',
                            'Vishesh Deep Tissue - vigorous Ayurvedic massage. 60min single: $255, 90min: $365, Dual therapist: $405-$535',
                            'Abhyanga Four-Handed signature massage with warm herbalized oils. Detoxes lymphatic system and restores youthful glow.',
                            'Nasya cleansing therapy with herbalized oils, wood/bone tools, and aromatic steam for face, neck, shoulders.',
                            '(y)oni Steam ancient ritual with Ayurvedic herbs, preceded by hormone-balancing facial massage with Kansa Wand.',
                            'Craniosacral Therapy - gentle touch releases stored tensions while fully clothed. Promotes clarity and emotional freedom.'
                        ];
                        var selectedTreatment = treatments[(day - 1) % treatments.length];
                        
                        activities.push({
                            time: spaTime,
                            title: selectedTreatment.split(' - ')[0] || selectedTreatment.split('.')[0],
                            location: 'Surya Spa (6 treatment rooms, outdoor patios, lounges)',
                            description: selectedTreatment + ' 15% discount for hotel guests. Treatments available in-room.',
                            bookingLink: 'https://dashboard.boulevard.io/booking/businesses/aac8e693-831d-4030-b8f8-eb9238e089bc/widget#/cart/menu/Session%20Time'
                        });
                    }
                    
                    if (interests.includes('outdoor')) {
                        activities.push({
                            time: '3:30 PM',
                            title: 'Santa Monica Beach & Bike Adventure',
                            location: 'Santa Monica State Beach & Marvin Braude Bike Trail',
                            description: 'Beach volleyball, surfboards, Electra and Rad Electric Fat Bikes provided. Cruise 22-mile bike path to Will Rogers Beach, Venice Pier, or El Porto surf spots. Linus bicycles and Pedal\'s e-bikes available.'
                        });
                    }
                }
                
                if (interests.includes('recovery')) {
                    var recoveryTime = interests.includes('outdoor') ? '4:30 PM' : '3:00 PM';
                    activities.push({
                        time: recoveryTime,
                        title: 'Complete Recovery Suite Experience',
                        location: 'Recovery Suite with Private Sun-Soaked Terrace',
                        description: 'Full protocol: Ammortal Chamber (25-50 min with PEMF, Vibroacoustic, Light & Hydrogen therapy), three temperature cold plunges, dry sauna (190°F), infrared sauna, 10-min Joovv red light therapy, compression therapy. 60-min: $245, 90-min: $345',
                        bookingLink: 'https://dashboard.boulevard.io/booking/businesses/aac8e693-831d-4030-b8f8-eb9238e089bc/widget#/cart/menu/Session%20Time'
                    });
                } else if (interests.includes('outdoor')) {
                    activities.push({
                        time: '5:00 PM',
                        title: 'Rooftop Pool Cabana & Sunset',
                        location: '7th Floor Rooftop Pool',
                        description: 'Luxuriate in poolside cabanas, gather around the circular bar with fireplace, epic views of surf, sand and city skyline. Pool deck dining available from Calabra.'
                    });
                }
                
                if (timing === 'evening' || timing === 'flexible') {
                    if (interests.includes('spa')) {
                        var eveningTreatments = [
                            'Crystal Sound Bath meditation with gentle vibrations harmonizing body, mind, spirit. Balances brain hemispheres, reduces chronic pain/headaches.',
                            'Chakra Light Balancing with Ayurvedic Color Therapy under Crystal Lights. Includes guided meditation for health, psychology, or relationships.',
                            'Chi Healing Session with Grandmaster Ten Hirakawa (53 years martial arts mastery). Unblocks meridians, restores vitality and longevity.',
                            'Tai Chi & Chi Gong private lesson learning core kata movements and organ-revitalizing techniques.',
                            '2.5-hour Transformative Healing Session blending three of Surya\'s most powerful therapies for lasting transformation.'
                        ];
                        var selectedEvening = eveningTreatments[(day - 1) % eveningTreatments.length];
                        
                        activities.push({
                            time: '6:00 PM',
                            title: selectedEvening.split(' with ')[0] || selectedEvening.split('.')[0],
                            location: 'Surya Spa',
                            description: selectedEvening + ' 15% discount for hotel guests.',
                            bookingLink: 'https://dashboard.boulevard.io/booking/businesses/aac8e693-831d-4030-b8f8-eb9238e089bc/widget#/cart/menu/Session%20Time'
                        });
                    }
                    
                    if (interests.includes('dining')) {
                        var dinnerLocation = day % 2 === 0 ? 'Calabra Rooftop Restaurant' : 'Palma Lobby Lounge';
                        var dinnerDescription = day % 2 === 0 ? 
                            'Mediterranean & California cuisine with panoramic Pacific views. Try Chicken Souvlaki with tzatziki, Pan Seared Salmon with herbed farro, or Calabra Burger. Biodynamic wines, boutique spirits. (5pm-10:30pm)' :
                            'New American all-day dining with seasonal, healthful ingredients. Artisanal cheese & charcuterie, grilled corn salad with shiitake bacon, freekeh & roasted grape salad. Small-batch mezcals and expertly crafted cocktails. (4pm-10:30pm)';
                        
                        activities.push({
                            time: '7:30 PM',
                            title: `Wellness Dinner at ${dinnerLocation.split(' ')[0]}`,
                            location: dinnerLocation,
                            description: dinnerDescription + ' All restaurants feature seed oil-free preparations.',
                            bookingLink: day % 2 === 0 ? 'https://www.opentable.com/r/calabra-santa-monica' : 'https://www.opentable.com/r/palma-santa-monica'
                        });
                    }
                }
                
                // Add Proper Club access for recovery-focused guests
                if (interests.includes('recovery') && !activities.some(a => a.location.includes('Club'))) {
                    activities.push({
                        time: '4:00 PM',
                        title: 'Proper Club Recovery Terrace',
                        location: 'Exclusive Outdoor Recovery Terrace',
                        description: 'Private outdoor terrace access with 2 cold plunges at varying temperatures, 2 traditional saunas, infrared sauna, private showers, and Surya tea service with healthy snacks. ($195/day access - Members & suite guests only)'
                    });
                }
                
                // Add Afternoon Tea option for dining enthusiasts
                if (interests.includes('dining') && (day === 2 || day === 4) && !activities.some(a => a.title.includes('Tea'))) {
                    activities.push({
                        time: '3:00 PM',
                        title: 'Proper Afternoon Tea Experience',
                        location: 'Palma Art-Filled Lounge',
                        description: 'Traditional high tea with Proper twist. Seasonal teas, curated bites, classic finger sandwiches, seasonal tartlets, fresh scones and pastries. $85 with bubbles, $105 with free-flowing bubbles. (Sat & Sun 12pm-4pm)',
                        bookingLink: 'https://www.opentable.com/r/palma-santa-monica'
                    });
                }
                
                // Add Wellness Room upgrade option
                if (day === 2 && !activities.some(a => a.title.includes('Wellness Room'))) {
                    activities.push({
                        time: '8:00 PM',
                        title: 'Wellness Room Technology Experience',
                        location: 'Restorative or Performance Wellness Rooms',
                        description: 'Experience advanced wellness technologies: Eight Sleep technology, air and water purification, curated sleep rituals. Restorative rooms for calm/renewal, Performance rooms for movement-focused amenities and recovery tools.'
                    });
                }
            }
            
            return activities;
        }ra Rooftop Restaurant' : 'Palma Lobby Lounge';
                        var dinnerDescription = day % 2 === 0 ? 
                            'Mediterranean & California cuisine with panoramic Pacific views. Try Chicken Souvlaki with tzatziki, Pan Seared Salmon with herbed farro, or Calabra Burger. Biodynamic wines, boutique spirits. (5pm-10:30pm)' :
                            'New American all-day dining with seasonal, healthful ingredients. Artisanal cheese & charcuterie, grilled corn salad with shiitake bacon, freekeh & roasted grape salad. Small-batch mezcals and expertly crafted cocktails. (4pm-10:30pm)';
                        
                        activities.push({
                            time: '7:30 PM',
                            title: `Wellness Dinner at ${dinnerLocation.split(' ')[0]}`,
                            location: dinnerLocation,
                            description: dinnerDescription + ' All restaurants feature seed oil-free preparations.',
                            bookingLink: day % 2 === 0 ? 'https://www.opentable.com/r/calabra-santa-monica' : 'https://www.opentable.com/r/palma-santa-monica'
                        });
                    }
                }
                
                // Add Proper Club access for recovery-focused guests
                if (interests.includes('recovery') && !activities.some(a => a.location.includes('Club'))) {
                    activities.push({
                        time: '4:00 PM',
                        title: 'Proper Club Recovery Terrace',
                        location: 'Exclusive Outdoor Recovery Terrace',
                        description: 'Private outdoor terrace access with 2 cold plunges at varying temperatures, 2 traditional saunas, infrared sauna, private showers, and Surya tea service with healthy snacks. ($195/day access - Members & suite guests only)'
                    });
                }
                
                // Add Afternoon Tea option for dining enthusiasts
                if (interests.includes('dining') && (day === 2 || day === 4) && !activities.some(a => a.title.includes('Tea'))) {
                    activities.push({
                        time: '3:00 PM',
                        title: 'Proper Afternoon Tea Experience',
                        location: 'Palma Art-Filled Lounge',
                        description: 'Traditional high tea with Proper twist. Seasonal teas, curated bites, classic finger sandwiches, seasonal tartlets, fresh scones and pastries. $85 with bubbles, $105 with free-flowing bubbles. (Sat & Sun 12pm-4pm)',
                        bookingLink: 'https://www.opentable.com/r/palma-santa-monica'
                    });
                }
                
                // Add Wellness Room upgrade option
                if (day === 2 && !activities.some(a => a.title.includes('Wellness Room'))) {
                    activities.push({
                        time: '8:00 PM',
                        title: 'Wellness Room Technology Experience',
                        location: 'Restorative or Performance Wellness Rooms',
                        description: 'Experience advanced wellness technologies: Eight Sleep technology, air and water purification, curated sleep rituals. Restorative rooms for calm/renewal, Performance rooms for movement-focused amenities and recovery tools.'
                    });
                }
            }
            
            return activities;
        }ra Rooftop Restaurant' : 'Palma Lobby Lounge';
                        var dinnerDescription = day % 2 === 0 ? 
                            'Mediterranean-inspired dinner with coastal influences. Fresh seafood, locally sourced ingredients, ocean views. Seamlessly blends indoor-outdoor settings.' :
                            'New American cuisine with seasonal, healthful ingredients. Intimate art-filled space with expertly crafted cocktails and small-batch spirits. (4pm-10:30pm daily)';
                        var dinnerLink = day % 2 === 0 ? 
                            'https://www.properhotel.com/santa-monica/restaurants-bars/calabra/menus/' :
                            'https://www.properhotel.com/santa-monica/restaurants-bars/palma/menus/';
                        
                        activities.push({
                            time: '7:30 PM',
                            title: `Wellness Dinner at ${dinnerLocation.split(' ')[0]}`,
                            location: dinnerLocation,
                            description: dinnerDescription + ' All restaurants feature seed oil-free preparations.',
                            bookingLink: day % 2 === 0 ? 'https://www.opentable.com/r/calabra-santa-monica' : 'https://www.opentable.com/r/palma-santa-monica'
                        });
                    }
                }
                
                // Add Proper Club access for members/suite guests
                if (interests.includes('recovery') && !activities.some(a => a.location.includes('Club'))) {
                    activities.push({
                        time: '4:00 PM',
                        title: 'Proper Club Recovery Terrace',
                        location: 'Exclusive Outdoor Recovery Terrace',
                        description: 'Private outdoor terrace access with 2 cold plunges at varying temperatures, 2 traditional saunas, infrared sauna, and Surya tea service with healthy snacks. ($195/day access - Members & suite guests only)'
                    });
                }
            }
            
            return activities;
        }

        function emailItinerary() {
            var email = document.getElementById('guest-email').value.trim();
            if (!email) {
                alert('Please enter your email address first.');
                return;
            }
            
            // Validate email format
            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address.');
                return;
            }
            
            var subject = 'Your Personalized Wellness Itinerary - Santa Monica Proper';
            var body = 'Dear ' + surveyData.names + ',\\n\\n' +
                      'Thank you for completing our wellness survey! Here is your personalized itinerary:\\n\\n' +
                      'GUEST INFORMATION:\\n' +
                      'Name(s): ' + surveyData.names + '\\n' +
                      'Traveling with: ' + surveyData.partyType + '\\n' +
                      'Arrival: ' + surveyData.arrivalDate + '\\n' +
                      'Length of Stay: ' + surveyData.lengthOfStay + ' night(s)\\n\\n' +
                      'WELLNESS PROFILE:\\n' +
                      'Energy Level: ' + surveyData.energyLevel.replace('-', ' ') + '\\n' +
                      'Interests: ' + surveyData.interests.join(', ') + '\\n' +
                      'Preferred Timing: ' + surveyData.timing.replace('-', ' ') + '\\n\\n' +
                      'SPECIAL NOTES:\\n' + (surveyData.notes || 'None provided') + '\\n\\n' +
                      'Contact us at (310) 620-9990 or wellness@properhotel.com to book your experience!\\n\\n' +
                      'Best regards,\\nSanta Monica Proper Wellness Team';
            
            var mailtoLink = 'mailto:' + email + '?subject=' + encodeURIComponent(subject) + '&body=' + encodeURIComponent(body);
            window.open(mailtoLink);
            alert('Your email client will open with your itinerary. Please send the email to receive your copy.');
        }

        function downloadPDF() {
            var printContent = '<!DOCTYPE html><html><head><title>Wellness Itinerary - ' + surveyData.names + '</title>' +
                '<style>body{font-family:serif;padding:20px;max-width:800px;margin:0 auto;line-height:1.6;}' +
                '.header{text-align:center;border-bottom:2px solid #000;padding-bottom:20px;margin-bottom:30px;}' +
                '.title{font-size:24px;font-weight:bold;margin-bottom:10px;}' +
                '.section{margin-bottom:25px;}.section-title{font-weight:bold;font-size:14px;border-bottom:1px solid #ccc;padding-bottom:5px;margin-bottom:15px;}' +
                '.info-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:15px;}' +
                '.info-item{font-size:12px;}.info-label{font-weight:bold;font-size:11px;}' +
                '.activity{margin-bottom:20px;padding:15px;border:1px solid #eee;background:#fafafa;}' +
                '.activity-time{font-weight:bold;font-size:12px;margin-bottom:5px;}' +
                '.activity-title{font-weight:bold;font-size:14px;margin-bottom:3px;}' +
                '.activity-location{font-style:italic;font-size:12px;color:#666;margin-bottom:8px;}' +
                '.activity-description{font-size:12px;}</style></head><body>' +
                '<div class="header"><div class="title">Your Personalized Wellness Itinerary</div>' +
                '<div>Santa Monica Proper Hotel</div></div>' +
                '<div class="section"><div class="section-title">Guest Information</div>' +
                '<div class="info-grid"><div class="info-item"><div class="info-label">Guest Name(s)</div><div>' + surveyData.names + '</div></div>' +
                '<div class="info-item"><div class="info-label">Traveling With</div><div>' + surveyData.partyType + '</div></div>' +
                '<div class="info-item"><div class="info-label">Arrival Date</div><div>' + surveyData.arrivalDate + '</div></div>' +
                '<div class="info-item"><div class="info-label">Length of Stay</div><div>' + surveyData.lengthOfStay + ' night(s)</div></div></div></div>' +
                '<div class="section"><div class="section-title">Your Wellness Profile</div>' +
                '<div class="info-grid"><div class="info-item"><div class="info-label">Energy Level</div><div>' + surveyData.energyLevel.replace('-', ' ') + '</div></div>' +
                '<div class="info-item"><div class="info-label">Preferred Timing</div><div>' + surveyData.timing.replace('-', ' ') + '</div></div></div>' +
                '<div class="info-item"><div class="info-label">Wellness Interests</div><div>' + surveyData.interests.join(', ') + '</div></div></div>' +
                '<div class="section"><div class="section-title">Sample Itinerary - Day 1</div>' +
                '<div class="activity"><div class="activity-time">2:00 PM</div><div class="activity-title">Check-in & Welcome</div>' +
                '<div class="activity-location">Front Desk</div><div class="activity-description">Arrive and check into your room. Receive your personalized wellness welcome package.</div></div>' +
                '<div class="activity"><div class="activity-time">3:30 PM</div><div class="activity-title">Wellness Consultation</div>' +
                '<div class="activity-location">Surya Spa</div><div class="activity-description">Brief consultation to finalize your personalized treatment schedule.</div></div>' +
                '<div class="activity"><div class="activity-time">5:00 PM</div><div class="activity-title">Rooftop Pool Experience</div>' +
                '<div class="activity-location">Rooftop</div><div class="activity-description">Relax at the only rooftop pool on the Westside with panoramic ocean views.</div></div></div>' +
                (surveyData.notes ? '<div class="section"><div class="section-title">Special Notes</div><div>' + surveyData.notes + '</div></div>' : '') +
                '<div style="background:#f5f5f5;padding:15px;border-left:4px solid #000;margin-top:30px;">' +
                '<div class="section-title">Ready to Book Your Experience?</div>' +
                '<div>Contact our wellness concierge: Phone: (310) 620-9990 | Email: wellness@properhotel.com</div></div>' +
                '</body></html>';
            
            var printWindow = window.open('', '_blank');
            printWindow.document.write(printContent);
            printWindow.document.close();
            printWindow.focus();
            setTimeout(function() { printWindow.print(); }, 250);
        }

        function completeForm() {
            var subject = 'Wellness Survey Results - ' + surveyData.names;
            var body = 'WELLNESS SURVEY RESULTS\\n' +
                      '=============================\\n\\n' +
                      'GUEST INFORMATION:\\n' +
                      'Name(s): ' + surveyData.names + '\\n' +
                      'Traveling with: ' + surveyData.partyType + '\\n' +
                      'Arrival Date: ' + surveyData.arrivalDate + '\\n' +
                      'Arrival Time: ' + (surveyData.arrivalTime || 'Not specified') + '\\n' +
                      'Length of Stay: ' + surveyData.lengthOfStay + ' night(s)\\n' +
                      'Departure Time: ' + (surveyData.departureTime || 'Not specified') + '\\n' +
                      'Occasion: ' + (surveyData.travelPurpose || 'Not specified') + '\\n\\n' +
                      'WELLNESS PREFERENCES:\\n' +
                      'Energy Level: ' + surveyData.energyLevel.replace('-', ' ') + '\\n' +
                      'Interests: ' + surveyData.interests.join(', ') + '\\n' +
                      'Preferred Timing: ' + surveyData.timing.replace('-', ' ') + '\\n\\n' +
                      'SPECIAL NOTES:\\n' + (surveyData.notes || 'None provided') + '\\n\\n' +
                      '=============================\\n' +
                      'Please use this information to create a personalized wellness itinerary for the guest.';
            
            var mailtoLink = 'mailto:wellness@properhotel.com?subject=' + encodeURIComponent(subject) + '&body=' + encodeURIComponent(body);
            window.open(mailtoLink);
            alert('Thank you! Your survey results will open in your email client. Please send the email to complete your submission.');
        }

        // Initialize on page load
        setTimeout(function() {
            console.log('Page loaded, initializing...');
            checkStep1();
        }, 100);

        // Activity swapping functionality
        function showSwapOptions(button, day, time) {
            var swapId = 'swap-' + day + '-' + time.replace(/[^a-zA-Z0-9]/g, '');
            var swapDiv = document.getElementById(swapId);
            
            // Toggle visibility
            if (swapDiv.classList.contains('active')) {
                swapDiv.classList.remove('active');
                button.textContent = 'Swap';
                return;
            }
            
            // Hide all other swap options first
            document.querySelectorAll('.swap-options').forEach(function(el) {
                el.classList.remove('active');
            });
            document.querySelectorAll('.swap-btn').forEach(function(btn) {
                btn.textContent = 'Swap';
            });
            
            // Show this swap option
            swapDiv.classList.add('active');
            button.textContent = 'Close';
            
            // Generate alternative activities
            var alternatives = generateAlternativeActivities(day, time);
            var optionsHtml = '';
            
            alternatives.forEach(function(alt) {
                optionsHtml += `
                    <div class="swap-option" onclick="swapActivity(${day}, '${time}', this)" 
                         data-title="${alt.title}" data-location="${alt.location}" 
                         data-description="${alt.description}" data-link="${alt.bookingLink || ''}">
                        <div class="activity-title" style="font-size: 10px; margin-bottom: 2px;">${alt.title}</div>
                        <div class="activity-location" style="font-size: 9px; color: #777; margin-bottom: 3px;">${alt.location}</div>
                        <div style="font-size: 9px; color: #666;">${alt.description.substring(0, 100)}...</div>
                    </div>`;
            });
            
            swapDiv.innerHTML = optionsHtml + `
                <div class="swap-option" onclick="hideSwapOptions('${swapId}', button)" 
                     style="text-align: center; font-weight: bold; color: #999;">
                    Cancel
                </div>`;
        }

        function generateAlternativeActivities(day, currentTime) {
            var alternatives = [];
            var interests = surveyData.interests;
            var energyLevel = surveyData.energyLevel;
            
            // Generate different options based on time of day and interests
            if (currentTime.includes('AM') || currentTime.includes('7:') || currentTime.includes('8:') || currentTime.includes('9:')) {
                // Morning alternatives
                alternatives.push({
                    title: 'Sunrise Beach Walk',
                    location: 'Santa Monica Beach',
                    description: 'Mindful walking meditation along the shoreline with ocean views and fresh air.'
                });
                
                alternatives.push({
                    title: 'Private Yoga Session',
                    location: 'Helios Studio',
                    description: 'One-on-one yoga instruction tailored to your level and goals.',
                    bookingLink: 'https://santa-monica-fitness.properhotel.com/'
                });
                
                if (interests.includes('dining')) {
                    alternatives.push({
                        title: 'Healthy Smoothie Workshop',
                        location: 'Palma Lounge',
                        description: 'Learn to create your own wellness smoothies with superfoods and adaptogens.',
                        bookingLink: 'https://www.opentable.com/r/palma-santa-monica'
                    });
                }
            } else if (currentTime.includes('PM') && (currentTime.includes('12:') || currentTime.includes('1:') || currentTime.includes('2:'))) {
                // Afternoon alternatives
                alternatives.push({
                    title: 'Guided Meditation Session',
                    location: 'Surya Spa',
                    description: 'Private meditation instruction with breathing techniques and mindfulness practices.',
                    bookingLink: 'https://dashboard.boulevard.io/booking/businesses/aac8e693-831d-4030-b8f8-eb9238e089bc/widget#/cart/menu/Session%20Time'
                });
                
                alternatives.push({
                    title: 'Rooftop Pool Relaxation',
                    location: '7th Floor Rooftop Pool',
                    description: 'Unstructured time to relax by the pool with optional poolside service.'
                });
                
                if (interests.includes('recovery')) {
                    alternatives.push({
                        title: 'Cold Plunge Session',
                        location: 'Recovery Suite',
                        description: 'Focus session using just the cold plunge therapy for circulation and recovery.',
                        bookingLink: 'https://dashboard.boulevard.io/booking/businesses/aac8e693-831d-4030-b8f8-eb9238e089bc/widget#/cart/menu/Session%20Time'
                    });
                }
            } else {
                // Evening alternatives
                alternatives.push({
                    title: 'Sunset Rooftop Experience',
                    location: 'Calabra Rooftop',
                    description: 'Watch the sunset with craft cocktails and light bites overlooking the Pacific.',
                    bookingLink: 'https://www.opentable.com/r/calabra-santa-monica'
                });
                
                alternatives.push({
                    title: 'Ayurvedic Consultation',
                    location: 'Surya Spa',
                    description: 'Extended consultation about your dosha and personalized wellness recommendations.',
                    bookingLink: 'https://dashboard.boulevard.io/booking/businesses/aac8e693-831d-4030-b8f8-eb9238e089bc/widget#/cart/menu/Session%20Time'
                });
                
                if (interests.includes('dining')) {
                    alternatives.push({
                        title: 'Wine & Wellness Pairing',
                        location: 'Palma Lounge',
                        description: 'Curated selection of biodynamic wines paired with healthy small plates.',
                        bookingLink: 'https://www.opentable.com/r/palma-santa-monica'
                    });
                }
            }
            
            // Add some universal alternatives
            alternatives.push({
                title: 'Personal Wellness Consultation',
                location: 'Guest Room',
                description: 'In-room consultation with wellness concierge to customize your remaining stay.'
            });
            
            alternatives.push({
                title: 'Free Time',
                location: 'Your Choice',
                description: 'Unscheduled time to explore Santa Monica, rest, or enjoy hotel amenities at your own pace.'
            });
            
            return alternatives;
        }

        function swapActivity(day, time, optionElement) {
            var activityItem = document.querySelector(`[data-day="${day}"][data-time="${time}"]`);
            var titleEl = activityItem.querySelector('.activity-title');
            var locationEl = activityItem.querySelector('.activity-location');
            var descriptionEl = activityItem.querySelector('.activity-description');
            
            // Update the activity content
            titleEl.textContent = optionElement.dataset.title;
            locationEl.textContent = optionElement.dataset.location;
            
            var newDescription = optionElement.dataset.description;
            if (optionElement.dataset.link && optionElement.dataset.link !== '') {
                newDescription += `<br><a href="${optionElement.dataset.link}" target="_blank" class="text-blue-600 underline text-xs mt-1 inline-block">Book Now</a>`;
            }
            descriptionEl.innerHTML = newDescription;
            
            // Hide swap options
            var swapDiv = activityItem.querySelector('.swap-options');
            swapDiv.classList.remove('active');
            
            // Reset button
            var swapBtn = activityItem.querySelector('.swap-btn');
            swapBtn.textContent = 'Swap';
            
            // Visual feedback
            activityItem.style.background = 'rgba(0, 255, 0, 0.1)';
            setTimeout(function() {
                activityItem.style.background = '';
            }, 1000);
        }

        function hideSwapOptions(swapId, button) {
            document.getElementById(swapId).classList.remove('active');
            button.textContent = 'Swap';
        }
    </script>
</body>
</html>